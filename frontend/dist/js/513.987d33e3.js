"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[513],{6513:function(a,t,r){r.r(t),r.d(t,{default:function(){return M}});var s=r(6252),e=r(9963),i=r(3577);const n=a=>((0,s.dD)("data-v-4ff41f86"),a=a(),(0,s.Cn)(),a),o={id:"conteudo"},u={class:"columns"},c={class:"field column is-one-quarter"},l=n((()=>(0,s._)("label",{class:"label"},"Usuários",-1))),d={class:"control"},g={class:"field is-one-fifth is-vcentered"},h={class:"table is-striped is-hoverable is-fullwidth"},m=n((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{style:{width:"5%"}},"#"),(0,s._)("th",{class:"px-0",style:{width:"20%"}},"Usuários"),(0,s._)("th",{class:"px-0"},"Funcionário"),(0,s._)("th",{class:"px-0 has-text-centered",style:{width:"10%"}},"Ações")])],-1))),p={class:"is-vcentered"},P={class:"is-vcentered"},f={class:"has-text-centered is-vcentered has-text-info"},_={class:"m-1"},v=["onClick"],w={colspan:"8"};function b(a,t,r,n,b,x){const C=(0,s.up)("fa"),y=(0,s.up)("router-link"),k=(0,s.up)("Paginador"),W=(0,s.up)("Confirmar");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",u,[(0,s._)("div",c,[l,(0,s._)("div",d,[(0,s._)("input",{ref:"busca",class:"input is-small",type:"text",autofocus:"",onKeyup:t[0]||(t[0]=(0,e.D2)(((...a)=>x.buscar&&x.buscar(...a)),["enter"]))},null,544)])])]),(0,s._)("div",g,[(0,s._)("button",{class:"button is-primary is-small mr-4",onClick:t[1]||(t[1]=(...a)=>x.buscar&&x.buscar(...a))},[(0,s.Wm)(C,{icon:"search",class:"mr-1"}),(0,s.Uk)("Buscar")]),(0,s.Wm)(y,{to:"/usuarios/formulario",class:"button is-info is-small mr-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(C,{icon:"plus",class:"mr-1"}),(0,s.Uk)("Novo")])),_:1})]),(0,s._)("table",h,[m,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(x.usuariosPorPagina,(a=>((0,s.wg)(),(0,s.iD)("tr",{key:a.id},[(0,s._)("th",null,(0,i.zw)(a.id),1),(0,s._)("td",p,(0,i.zw)(a.usuario),1),(0,s._)("td",P,(0,i.zw)(a.nome),1),(0,s._)("td",f,[(0,s._)("a",_,[(0,s.Wm)(C,{icon:"bars"})]),(0,s.Wm)(y,{to:"usuarios/formulario?id="+a.id,class:"m-1"},{default:(0,s.w5)((()=>[(0,s.Wm)(C,{icon:"edit"})])),_:2},1032,["to"]),(0,s._)("a",{class:"m-1 has-text-danger",onClick:t=>x.excluir(a.id)},[(0,s.Wm)(C,{icon:"trash-can"})],8,v)])])))),128))]),(0,s._)("tfoot",null,[(0,s._)("tr",null,[(0,s._)("th",w,"Total: "+(0,i.zw)(b.usuarios.length),1)])])]),(0,s.Wm)(k,{perPage:b.perPage,itens:b.usuarios,"onUpdate:currentPage":x.updateCurrentPage},null,8,["perPage","itens","onUpdate:currentPage"]),(0,s.Wm)(W,{ref:"Confirmar",onConfirmado:x.updateExcluir},null,8,["onConfirmado"])])}var x=r(4621);const C={class:"pagination is-centered py-1",role:"navigation","aria-label":"pagination"},y={class:"pagination-list"},k=["onClick"];function W(a,t,r,e,n,o){return(0,s.wg)(),(0,s.iD)("nav",C,[(0,s._)("a",{class:"pagination-previous",onClick:t[0]||(t[0]=a=>o.previousPage())},"Previous"),(0,s._)("a",{class:"pagination-next",onClick:t[1]||(t[1]=a=>o.nextPage())},"Next page"),(0,s._)("ul",y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.totalPages,(a=>((0,s.wg)(),(0,s.iD)("li",{key:a},[(0,s._)("a",{class:(0,i.C_)(["pagination-link",{"is-current":a===n.currentPage}]),onClick:t=>o.goToPage(a)},(0,i.zw)(a),11,k)])))),128))])])}var $={name:"Paginador",data(){return{currentPage:1}},props:{perPage:Number,itens:Array},computed:{totalPages(){return Math.ceil(this.itens.length/this.perPage)},itensPorPagina(){return this.getItensPorPagina()}},methods:{previousPage(){this.currentPage>1&&(this.currentPage-=1,this.$emit("update:currentPage",this.currentPage))},nextPage(){this.currentPage<this.totalPages&&(this.currentPage+=1,this.$emit("update:currentPage",this.currentPage))},goToPage(a){this.currentPage=a,this.$emit("update:currentPage",a)},getItensPorPagina(){try{const a=(this.currentPage-1)*this.perPage;return this.itens.slice(a,a+this.perPage)}catch(a){console.log(a)}}}},D=r(3744);const E=(0,D.Z)($,[["render",W]]);var U=E,z=r(3208),Z={name:"UsuariosView",components:{Paginador:U,Confirmar:z.Z},data(){return{usuarios:[],perPage:5,currentPage:1,confirmar:{tipo:"danger",ativo:!1,titulo:"Excluir",mensagem:"Tem certeza que quer excluir o usuário ",id:null}}},async mounted(){await this.listar()},methods:{listar:async function(){try{const a=await x.Z.get("api/usuarios/listar");this.usuarios=a.data.usuarios}catch(a){this.$root.mostrarFlashMenssage("danger","Erro",a),console.error(a)}},updateCurrentPage(a){this.currentPage=a},buscar:async function(){try{const a=this.$refs.busca.value,t=await x.Z.post("api/usuarios/buscar",a);this.usuarios=t.data.usuarios}catch(a){this.$root.mostrarFlashMenssage("danger","Erro",a),console.error(a)}},excluir(a){this.$root.mostrarConfirmar(this.confirmar.tipo,this.confirmar.titulo,this.confirmar.mensagem+a+"?","confirmado"),this.confirmar.id=a},async updateExcluir(a){console.log("oi"),a&&(await x.Z.post("/api/usuarios/excluir-usuario",this.confirmar.id).then((a=>{this.erroValidacao=a.data.erroValidacao,this.$root.mostrarFlashMenssage(a.data.tipo,a.data.titulo,a.data.mensagem)})).catch((a=>{this.$root.mostrarFlashMenssage("danger","Erro",a),console.error("Erro ao excluir:",a)})),await this.listar())}},computed:{usuariosPorPagina(){const a=(this.currentPage-1)*this.perPage;return this.usuarios.slice(a,a+this.perPage)}}};const F=(0,D.Z)(Z,[["render",b],["__scopeId","data-v-4ff41f86"]]);var M=F}}]);
//# sourceMappingURL=513.987d33e3.js.map